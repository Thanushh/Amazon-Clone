!function i(r,s,c){function d(t,e){if(!s[t]){if(!r[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(l)return l(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[t]={exports:{}};r[t][0].call(o.exports,function(e){return d(r[t][1][e]||e)},o,o.exports,i,r,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)d(c[e]);return d}({1:[function(e,t,a){var n=e("./lib/replace"),o=e("./lib/getSlotPlaceholder").getSlotPlaceholder,i=e("./lib/getSlotPlaceholder").getClickTrackingParamWithSlotId;t.exports.replace=n,t.exports.getSlotPlaceholder=o,t.exports.getClickTrackingParamWithSlotId=i},{"./lib/getSlotPlaceholder":2,"./lib/replace":4}],2:[function(e,t,a){var n=e("./globals"),o="data-val";function i(e){if("string"!=typeof e||""===e)return"";var t=n.getDocument().getElementById("ape_"+e+"_placement_ClickTracking");if(!(t&&t.hasAttribute&&"function"==typeof t.hasAttribute&&t.hasAttribute(o)&&t.getAttribute&&"function"==typeof t.getAttribute))return"";var a=t.getAttribute(o);return"string"!=typeof a?"":a}t.exports.getSlotPlaceholder=function(e,t,a){return i([e,a,t].join("_"))},t.exports.getClickTrackingParamWithSlotId=i},{"./globals":3}],3:[function(e,t,a){t.exports.getDocument=function(){return document}},{}],4:[function(e,t,a){var u=new RegExp(/((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))pd_rd_plhdr(=|%3D)t((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))/),p="$1",f="$14";t.exports=function(e,t){var a=t,n=e;if("string"!=typeof e||"&pd_rd_plhdr=t"===e||""===e.trim())return a;(n=n.replace(/&amp;/g,"&")).startsWith("&")&&(n=n.replace(/^&+/,"")),n.endsWith("&")&&(n=n.replace(/&+$/,""));try{var o,i=0;do{if(i++,!(o=a.match(u)))break;var r=o[1],s=o[14],c=o[13],d=r.startsWith("&")&&r.endsWith(";")||s.startsWith("&")&&s.endsWith(";"),l=r.startsWith("%")&&s.startsWith("%")&&"%3D"===c;a=d?a.replace(u,p+n.replace(/&/g,"&amp;")+f):l?a.replace(u,p+encodeURIComponent(n)+f):a.replace(u,p+n+f)}while(o&&i<10)}catch(e){return t}return a}},{}],5:[function(e,t,a){var n=e("./ajaxRequest");t.exports.Tracer=function(e,t){return this.traceId=e,this.adStartTime=t,this.storedTrace={},this.logTrace=function(e,t){if(void 0!==this.traceId){var a,n=(new Date).getTime();this.storedTrace.hasOwnProperty(e)||(this.storedTrace[e]=[]),(a=t===Object(t)?Object.assign&&"function"==typeof Object.assign?Object.assign({},t):JSON.parse(JSON.stringify(t)):(a='{ "'+e+'":"'+t+'"}',JSON.parse(a))).timeStamp=n,a.timeSinceAdStart=n-this.adStartTime,this.storedTrace[e].push(a)}},this.sendTrace=function(){var t=function(){console.log("failed to send request to /gp/adbarplus")};if(!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(this.storedTrace)){var e="/gp/adbarplus?traceId="+this.traceId+"&systemName=browser";for(var a in n.sendAjaxRequest(e,"POST",JSON.stringify(this.storedTrace),{"Content-Type":"application/x-www-form-urlencoded"},function(e){4===e.readyState&&200!==e.status&&t()},t),this.storedTrace)this.storedTrace.hasOwnProperty(a)&&delete this.storedTrace[a]}},this.bindSendTraceToPageOnLoad=function(){var e=function(e,t){return function(){return e.apply(t)}},t=function(){this.sendTrace()},a=function(){this.sendTrace(),window.setInterval(e(t,this),3e3)};"loading"!==document.readyState?e(a,this)():window.addEventListener?window.addEventListener("load",e(a,this)):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e(a,this)()})},void 0!==e&&this.bindSendTraceToPageOnLoad(),{traceId:this.traceId,adStartTime:this.adStartTime,storedTrace:this.storedTrace,allData:this.allData,logTrace:this.logTrace,sendTrace:this.sendTrace}}},{"./ajaxRequest":6}],6:[function(e,t,a){t.exports.sendAjaxRequest=function(e,t,a,n,o,i){try{var r=null;if(window.XMLHttpRequest?r=new XMLHttpRequest:i(),r){if(r.onreadystatechange=function(){o(r)},r.open(t,e,!0),null!==n)for(var s in n)r.setRequestHeader(s,n[s]);r.send(a)}else i()}catch(e){i()}}},{}],7:[function(e,t,a){var p=e("../host/metrics/counters"),f=e("../host/metrics/events");t.exports.checkCache=function(e,t,n,o,a,i){var r=p.CACHE_COUNTERS,s=f.CACHE_EVENTS;if("undefined"!=typeof performance&&void 0!==performance.getEntriesByType){var c=performance.getEntriesByType("resource");if(void 0!==c&&Array.isArray(c)&&!(c.length<1)&&void 0!==c[0].duration){var d=void 0!==c[0].transferSize?function(e,t,a){0===e.transferSize?(l(t+"cached"),i(a+"cached",n,o)):(l(t+"uncached"),i(a+"uncached",n,o))}:function(e,t,a){e.duration<20?(l(t+"fastload"),i(a+"fastload",n,o)):(l(t+"slowload"),i(a+"slowload",n,o))};u(e,r.SF_LIBRARY,s.SF_LIBRARY),u(t,r.SF_HTML,s.SF_HTML)}}function l(e){a(n,o,e,1)}function u(e,t,a){if(e)for(var n=0;n<c.length;n++){var o=c[n];if(o.name&&-1!==o.name.indexOf(e))return void d(o,t,a)}}}},{"../host/metrics/counters":17,"../host/metrics/events":20}],8:[function(e,t,a){var n=e("@amzn/apejs-click-tracking");t.exports.getSlotPlaceholder=function(e){if(!("pageType"in e&&"subPageType"in e&&"slotName"in e))return"";try{return n.getSlotPlaceholder(e.pageType,e.subPageType,e.slotName)}catch(e){return""}}},{"@amzn/apejs-click-tracking":1}],9:[function(e,u,t){
/*
    @license
    Underscore.js 1.8.3
    http://underscorejs.org
    (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
    Underscore may be freely distributed under the MIT license.
*/
var n=function(){return window.P&&window.P.AUI_BUILD_DATE};u.exports.throttle=function(a,n,o){var i,r,s,c=null,d=0;o||(o={});var l=function(){d=!1===o.leading?0:u.exports.now(),c=null,s=a.apply(i,r),c||(i=r=null)};return function(){var e=u.exports.now();d||!1!==o.leading||(d=e);var t=n-(e-d);return i=this,r=arguments,t<=0||n<t?(c&&(clearTimeout(c),c=null),d=e,s=a.apply(i,r),c||(i=r=null)):c||!1===o.trailing||(c=setTimeout(l,t)),s}},u.exports.now=function(){return Date.now?Date.now():(new Date).getTime()},u.exports.addListener=function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):window.attachEvent&&e.attachEvent("on"+t,a)},u.exports.removeListener=function(e,t,a){e.removeEventListener&&e.removeEventListener(t,a,!1)},u.exports.addWindowListener=function(e,t){u.exports.addListener(window,e,t)},u.exports.removeWindowListener=function(e,t){window.removeEventListener?window.removeEventListener(e,t,!1):window.detachEvent&&window.detachEvent("on"+e,t)},u.exports.ensureMessageListener=function(e){u.exports.removeWindowListener("message",e),u.exports.addWindowListener("message",e)},u.exports.decodeBase64=function(e){var t,a,n,o,i,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)t=s.indexOf(e.charAt(d++))<<2|(o=s.indexOf(e.charAt(d++)))>>4,a=(15&o)<<4|(i=s.indexOf(e.charAt(d++)))>>2,n=(3&i)<<6|(r=s.indexOf(e.charAt(d++))),c+=String.fromCharCode(t),64!=i&&(c+=String.fromCharCode(a)),64!=r&&(c+=String.fromCharCode(n));return c=function(e){for(var t="",a=0,n=0,o=0,i=0;a<e.length;)(n=e.charCodeAt(a))<128?(t+=String.fromCharCode(n),a++):191<n&&n<224?(o=e.charCodeAt(a+1),t+=String.fromCharCode((31&n)<<6|63&o),a+=2):(o=e.charCodeAt(a+1),i=e.charCodeAt(a+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&i),a+=3);return t}(c)},u.exports.createScript=function(e,t,a,n,o){if(!document.getElementById(a)){var i=document.createElement("script");return i.async=!0,i.setAttribute("crossorigin","anonymous"),i.src=e,i.type=t,i.id=a,i.onerror=n,i.onload=o,i}},u.exports.isAUIAvailable=n,u.exports.safeFunctionWrapper=function(e,t,a){return n()&&"function"==typeof window.P.guardError?P.guardError("APE-SafeFrame",e):function(){try{e.apply(this,arguments)}catch(e){"function"==typeof t&&a&&t(a,e)}}},u.exports.getCookie=function(e){var t=e+"=";try{for(var a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var o=a[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}}catch(e){}return""},u.exports.disableCookieAccess=function(){try{Object&&Object.defineProperty&&"function"==typeof Object.defineProperty?Object.defineProperty(document,"cookie",{get:function(){return""},set:function(){}}):(document.__defineGetter__("cookie",function(){return""}),document.__defineSetter__("cookie",function(){}))}catch(e){}},u.exports.setObjectStyles=function(e,t){if(e&&t)for(var a in t)e.style[a]=t[a];return e},u.exports.ABP_STATUS={1:"Enabled",0:"NotEnabled","-1":"Unknown"},u.exports.hasHostname=function(e){var t="";return e&&(t=-1<e.indexOf("//")?e.split("/")[2]:e.split("/")[0]),0!=t.length},u.exports.isVideo=function(e){return"V"===e},u.exports.disableGeolocationApi=function(){window.navigator&&window.navigator.geolocation&&(window.navigator.geolocation.watchPosition=function(){},window.navigator.geolocation.getCurrentPosition=function(){})}},{}],10:[function(w,e,t){
/**
 * @license
 * Copyright (c) 2014, Amazon.com
 * APE SafeFrame v1.50.23d2360 -- 2022-06-28T17:32:47+0000
*/
!function(O,P){var n=w("./messenger/msgHandler"),t=w("./metrics/counters"),i=w("./metrics/events"),r=w("../components/cacheChecker"),F=w("../components/adBarTracer"),s=w("./components/adFeedback"),e=w("./metrics/csm"),a=w("./metrics/csa"),z=w("../components/clickTrackingHelper"),c=w("./components/videoOrchestrator"),d=w("./hostAPI"),V=n.util,W=n.messenger,B=n.logError,l=W.appendErrorDetails,o=n.loadScript,U=e.sendCsmLatencyMetric,H=e.sendCsmCounter,j=a.initCsaLatencyPlugin,G=a.markCsaLatencyMetric,q=a.logCsaEvent,J=a.addCsaEntity,u=a.initCsaEvents,Q=e.addCsmTag,p=n.fireViewableLatencyMetrics,X=n.hasClass,f=n.createIframeWithAttributes,Y=n.logCounter,K=n.collapseSlot,m=n.setResizePlacementStyle,g=n.resizeSafeFrameAd,$=n.delayLoad,Z=n.getMediaCentralOrigin,ee=n.sizeValidator,te=n.checkAgainstAllowlist,ae=V.ABP_STATUS;function h(){if(O.DAsf)O.DAsf.loadAds();else{O.DAsf={version:"1.50.23d2360"},u(),H(null,null,t.SF_VERSION_COUNTERS.VERSION+":"+O.DAsf.version,1),q(i.SF_VERSION_EVENTS.VERSION+O.DAsf.version);var h="text/x-dacx-safeframe",e=Z(),w=e+"/images/S/apesafeframe/ape/sf/desktop/sf-1.50.23d2360.html",v=e+"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sf-1.50.23d2360.html",y=e+"/images/S/apesafeframe/ape/sf/desktop/sfVideo-1.50.23d2360.html",S=e+"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sfVideo-1.50.23d2360.html",b="data-arid",E="d16g_postMessageUnsupported",T="d16g_postMessageSupported",A=t.ABP_STATUS_COUNTERS,x=i.ABP_STATUS_EVENTS,I=t.AD_LOAD_COUNTERS,C=i.AD_LOAD_EVENTS,a=t.MESSENGER_COUNTERS,o={},L={},k={};W.supportedCommands={sendAdBarTrace:function(e,t){e.options.arid in k&&k[e.options.arid].logTrace(t.field,t.traceInfo)},logAPIInvocation:function(e,t){H(null,null,a.API+t.apiName,1),H(e.options.slot,e.options.placementId,a.API+t.apiName,1),e.options.arid in k&&k[e.options.arid].logTrace("apiCalls",t)},resizeSafeFrameAd:function(e,t){V.addWindowListener("resize",o[e.options.arid].defaultResizeSafeFrameHandler),g(e.options.arid,e.options.size.width,e.options.size.height,e.options.maxAdWidth,W,L)},setResizePlacementStyle:function(e,t){V.addWindowListener("resize",o[e.options.arid].defaultSetResizePlacementStyle),m(e.options.arid,L,e.options.resizePlacementStyle)},changeSize:function(e,t){var a=e.options.allowedSizes;if(void 0===e.options.allowChangeSize||e.options.allowChangeSize)if(te(t,a,ee))e.slot.style.width=t.width,e.iframe.height=t.height,e.iframe.width=t.width;else{var n="Size is not allowlisted: "+t.width+" x "+t.height+l(e.options.arid);B(n)}},startPixelTracking:d.startPixelTracking,startPixelTrackingForLegacyImpression:d.startPixelTrackingForLegacyImpression,collapseSlot:function(e,t){K(L[e.options.arid].placementDivId),K(L[e.options.arid].auiCardDeckId),"nav-sitewide-msg"===e.options.slotName&&$("amznJQ.available:navbarJSLoaded",function(){void 0!==parent.navbar&&"function"==typeof parent.navbar.unHideSWM&&parent.navbar.unHideSWM()})},logError:function(e,t){B(t.message+l(e.options.arid)+": "+e.options.slot,t.error)},logCsaEvent:function(e,t){q(t.metricName,e.options.slot,e.options.placementId)},addCsaEntity:function(e,t){J(t)},sendCsmLatencyMetric:function(e,t){U(t.metric,e.options.slot,e.options.placementId,t.metricMsg,t.timestamp)},markCsaLatencyMetric:function(e,t){G(t.metric,t.timestamp)},countMetric:function(e,t){t.isGlobal?H(null,null,t.metricMsg,t.value):H(e.options.slot,e.options.placementId,t.metricMsg,t.value)},addCsmTag:function(e,t){t.isGlobal?Q(t.tag,null,null,t.msg):Q(t.tag,e.options.slot,e.options.placementId,t.msg)},fireViewableLatencyMetrics:function(e,t){p(e.options.arid,e.options.slot,e.options.placementId,t.adLoadedTimestamp)},customMessage:function(e,t){W.customMessage(t.key,t.body,e.options.allowlistedCustomMessageEvents,e.options.slot,e.options.placementId)},enableViewabilityTracker:function(e){W.updateViewability(e.options.arid);var t=V.throttle(W.updateViewability,20);if(M(e.options.arid,e.options.slot,"viewabilityTracker",function(){t(e.options.arid)}),V.addWindowListener("scroll",o[e.options.arid].viewabilityTracker),V.addWindowListener("resize",o[e.options.arid].viewabilityTracker),V.addListener(P,"visibilitychange",o[e.options.arid].viewabilityTracker),n.isInterSectionObserverSupported()){new IntersectionObserver(function(){W.updateViewability(e.options.arid)},{threshold:[0,.5,1]}).observe(e.slot)}},enableNoInventoryViewabilityTrackerAndInvokeFallback:function(e){W.takeSnapshotOfSlotPosition(e.options.arid),W.updateNoInventoryViewability(e.options.arid),W.sendMessageToAd(e.options.arid,"handleFallbackBehavior",{});var t=V.throttle(W.updateNoInventoryViewability,20);M(e.options.arid,e.options.slot,"noInventoryViewabilityTracker",function(){t(e.options.arid)}),V.addWindowListener("scroll",o[e.options.arid].noInventoryViewabilityTracker),V.addWindowListener("resize",o[e.options.arid].noInventoryViewabilityTracker),V.addListener(P,"visibilitychange",o[e.options.arid].noInventoryViewabilityTracker)},loadAdFeedback:function(e,t){var a=W.adMap[e.options.arid].iframe;e.options.adCreativeMetaData=t,s.appendAdFeedbackLinkToIframe(a,e.options,k)},safeFrameReady:function(e){},requestVideoAutoplay:function(e,t){c.requestVideoAutoplay(e,t,W)},releaseVideoAutoplay:function(){c.releaseVideoAutoplay()},haveVideoAutoplayPermission:function(e){c.haveVideoAutoplayPermission(e)},logSafeframeResourceTimingData:function(e,t){O.logSafeframeResourceTimingData(e.options,t)},saveAdDetailsForAdReporter:function(e,t){if(O.adReporterConfig){O.adReporterDetails||(O.adReporterDetails={});var a=e.options.slotName;t&&a===t.slotName?O.adReporterDetails[a]=t:O.adReporterDetails[a]||(O.adReporterDetails[a]=e.options)}}},V.addWindowListener("message",W.receiveMessage),O.DAsf.registerCustomMessageListener=W.registerCustomMessageListener,O.DAsf.sendCustomMessage=W.sendCustomMessage,O.DAsf.loadAds=function(){var e,t,a=0,n=null,o=[];if("function"!=typeof P.getElementsByClassName){var i=P.getElementsByTagName("div"),r=P.getElementsByTagName("script"),s=0;for(s=0;s<i.length;s++)o[s]=i[s];for(s=0;s<r.length;s++)o[s+i.length]=r[s]}else o=P.getElementsByClassName(h);for(0===o.length&&(o=P.getElementsByTagName("script"));n=o[a++];)if("DIV"===n.tagName&&X(n,h)||n.getAttribute("type")===h){var c=n.getAttribute("data-ad-details")||n.text||n.innerHTML||n.innerText;try{(c=JSON.parse(c)).fallbackStaticAdClickUrl&&(V.hasHostname(c.fallbackStaticAdClickUrl)||(c.fallbackStaticAdClickUrl=O.location.protocol+"//"+O.location.host+c.fallbackStaticAdClickUrl));var d="ape_"+c.slot+"_placement",l=P.getElementById(d);if(!W.adMap[c.arid]&&l&&l.innerHTML&&(l.innerHTML="",n.removeAttribute(b)),j(l),n.getAttribute(b))continue;c.arid=c.arid||Math.random().toString(16).slice(2),k[c.arid]=new F.Tracer(c.traceId,O[c.slotName]&&O[c.slotName].adStartTime||0),k[c.arid].logTrace("safeFrameInput",c);var u={};u.caches=O.caches?O.caches:null,u.plugins=P.plugins?P.plugins:null,u.cookies=P.cookie?P.cookie:null,u.userAgents=navigator.userAgent?navigator.userAgent:null,k[c.arid].logTrace("browserData",u),n.setAttribute(b,c.arid),c.hostDomain=location.protocol+"//"+location.host,c.allowedSizes="object"==typeof c.allowedSizes&&0<=c.allowedSizes.length?c.allowedSizes.concat(c.size):[c.size];var p="d3l3lkinz3f56t.cloudfront.net,g-ecx.images-amazon.com,z-ecx.images-amazon.com,images-na.ssl-images-amazon.com,g-ec4.images-amazon.com,images-cn.ssl-images-amazon.com".split(",");if(c.allowedDomains="object"==typeof c.allowedDomains&&0<=c.allowedDomains.length?c.allowedDomains.concat(p):p,c.queryParams=R(c.allowlistedQueryParamKeys),c.aPageStart=O.aPageStart,c.adStartTime=O[c.slotName]&&O[c.slotName].adStartTime||0,M(c.arid,c.slot,"defaultResizeSafeFrameHandler",N(c)),M(c.arid,c.slot,"defaultSetResizePlacementStyle",_(c)),e=c.arid,t=c.slot,L[e]={slotId:t,placementDivId:"ape_"+t+"_placement",iframeId:"ape_"+t+"_iframe",auiCardDeckId:"ape_"+t+"_aui_cardDeck"},"clickTracking"in c&&""===c.clickTracking&&(c.clickTracking=z.getSlotPlaceholder(c)),c.forcePunt){Q("forcePunt",c.slot,c.placementId),J({forcePunt:"true"}),K(L[c.arid].placementDivId);continue}var f="true"===c.abpAcceptable&&("1"===c.abpStatus||"-1"===c.abpStatus);if(V.isVideo(c.mediaType)?c.safeFrameSrc=f?S:y:c.safeFrameSrc=f?v:w,c.abpStatus)for(var m in Q("ABPStatus"+ae[c.abpStatus],c.slot),J({ABPStatus:ae[c.abpStatus]}),ae)H(c.slot,c.placementId,A[m],c.abpStatus===m?1:0),c.abpStatus===m&&q(x[m],c.slot,c.placementId);c.collectSafeframeRTD=O.collectSafeframeRTD,U("af",c.slot,c.placementId),G("clickToATF"),H(c.slot,c.placementId,I.START,1),q(C.START,c.slot,c.placementId);var g={};if(g.hostDomain=c.hostDomain,g.allowedSizes=c.allowedSizes,g.allowedDomains=c.allowedDomains,g.queryParams=c.queryParams,g.aPageStart=c.aPageStart,g.adStartTime=c.adStartTime,g.safeFrameSrc=c.safeFrameSrc,g.abpStatus=c.abpStatus,"function"!=typeof O.postMessage){Y(E,1),K(L[c.arid].placementDivId),g.postMessage="postMessageNotSupported";continue}Y(T,1),$(c.loadAfter,D(c),0,n),g.postMessage="postMessageSupported",g.loadAfter=c.loadAfter,k[c.arid].logTrace("additionalInitilizationParams",g)}catch(e){c=null,B("Error parsing sf tag",e)}}},O.DAsf.loadAds()}function M(e,t,a,n){o[e]=o[e]||{},o[e][a]=V.safeFunctionWrapper(n,B,"Error within ad handler "+a+": "+t)}function R(e){var t={};try{for(var a=O.location.search.substring(1).split("&"),n=0;n<a.length;n++){var o=a[n].split("="),i=o[0];1<o.length&&-1<e.indexOf(i)&&(t[i]=o[1])}}catch(e){B("Error parsing query parameters",e)}return t}function N(e){return function(){g(e.arid,e.size.width,e.size.height,e.maxAdWidth,W,L)}}function _(e){return function(){m(e.arid,L,e.resizePlacementStyle)}}function D(t){return V.safeFunctionWrapper(function(){var e={callbackOccurred:!0};e.loadAfter=t.loadAfter,k[t.arid].logTrace("pageCallBack",e),H(t.slot,t.placementId,I.CALLBACK,1),q(C.CALLBACK,t.slot,t.placementId),function(e,t){if(!e)return!1;var a=P.getElementById(e);if(a&&!a.innerHTML){var n=a.getAttribute(b);if(n&&n===t.arid)return!0}return!1}(L[t.arid].placementDivId,t)&&(function(t){try{var e=P.getElementById(L[t.arid].placementDivId),a={},n=L[t.arid].iframeId,o=t.safeFrameSrc,i=f(t,n,o);i.onload=function(){r.checkCache(t.DAsfUrl,t.safeFrameSrc,t.slot,t.placementId,H,q)},e.appendChild(i),U("cf",t.slot,t.placementId),G("criticalFeature"),H(t.slot,t.placementId,I.IFRAME_CREATED,1),q(C.IFRAME_CREATED,t.slot,t.placementId),W.adMap[t.arid]={slot:e,iframe:i,options:t},a.id=i.id,a.src=i.src,a.scrolling=i.scrolling,a.height=i.height,a.width=i.width,a.className=i.className,a.styleCssText=i.style.cssText,a.sandbox=i.sandbox,k[t.arid].logTrace("createSafeFrame",a)}catch(e){B("Error creating safeFrame",e),k[t.arid]&&k[t.arid].logTrace("createSafeFrame",{error:{message:"errorCreatingSafeFrame",ex:e}})}}(t),s.appendSponsoredLabelToIframe(W.adMap[t.arid].iframe,t,k))},B,"Error in callback to create Safeframe.")}}V.safeFunctionWrapper(function(){"undefined"==typeof JSON?o("https://images-na.ssl-images-amazon.com/images/G/01/da/js/json3.min._V308851628_.js",h):h()},B,"Error initializing safeFrame")()}(window,document)},{"../components/adBarTracer":5,"../components/cacheChecker":7,"../components/clickTrackingHelper":8,"./components/adFeedback":11,"./components/videoOrchestrator":13,"./hostAPI":15,"./messenger/msgHandler":16,"./metrics/counters":17,"./metrics/csa":18,"./metrics/csm":19,"./metrics/events":20}],11:[function(e,t,a){var p=e("../metrics/csm").sendCsmCounter,f=e("../metrics/csa").logCsaEvent,m=e("../metrics/counters").FEEDBACK_COUNTERS,g=e("../metrics/events").FEEDBACK_EVENTS,h=e("../../components/ajaxRequest"),s=e("../../components/util").setObjectStyles,o=e("../../components/util").decodeBase64;function w(e,t){if(!e||!t.adFeedbackInfo.boolFeedback||e.isFeedbackLoaded)return null;var a=e.parentNode,n=t.feedbackDivStyle,o=t.adFeedbackInfo.adFeedbackOnTop;return a.getElementsByTagName("div")[0]||v("div",{id:a.id+"_Feedback"},n,a,o?a.firstChild:null)}function v(e,t,a,n,o){var i=document.createElement(e);for(var r in t)i.setAttribute(r,t[r]);return s(i,a),n.insertBefore(i,o),i}t.exports.appendSponsoredLabelToIframe=function(e,t,a){var n=w(e,t);n&&((n.getElementsByTagName("div")[0]||v("div",{},t.advertisementStyle,n)).innerHTML=o(t.adFeedbackInfo.sponsoredText),a[t.arid].logTrace("adFeedBack",{renderSponsoredLabel:!0}),p(t.slot,t.placementId,m.LABEL_RENDER,1),f(g.LABEL_RENDER,t.slot,t.placementId))},t.exports.appendAdFeedbackLinkToIframe=function(e,o,i){var r=w(e,o);if(r){e.isFeedbackLoaded=!0;var t=e.parentNode,s=o.placementId,a=o.adFeedbackInfo.endPoint,n=o.feedbackDivStyle,c={adPlacementMetaData:o.adPlacementMetaData,adCreativeMetaData:o.adCreativeMetaData},d={};d.isFeedbackLoaded=e.isFeedbackLoaded,d.slot=t,d.placementId=s,d.endPoint=a,d.feedbackDivStyle=n,d.adFeedbackParams=c;var l,u=a&&a.length?window.location.protocol+"//"+window.location.hostname+a+"?pl="+(l=c,encodeURIComponent(JSON.stringify(l))):a;d.requestUrl=u,i[o.arid].logTrace("adFeedBack",{adFeedbackRequest:d}),u&&(p(o.slot,s,m.REQUEST,1),f(g.REQUEST,o.slot,s),h.sendAjaxRequest(u,"GET",null,null,function(e){var t={feedbackResponseStarted:!0,feedBackResponseReturned:!1};if(4===e.readyState){if(200===e.status)try{var a=e.responseText,n=JSON.parse(a);(t.response=n)&&"ok"===n.status&&("html"in n&&n.html&&(r.innerHTML=n.html),"script"in n&&n.script&&((r.getElementsByTagName("script")[0]||v("script",{},{},r)).innerHTML=n.script),p(o.slot,s,m.SUCCESS,1),f(g.SUCCESS,o.slot,s),t.feedBackResponseReturned=!0)}catch(e){p(o.slot,o.placementId,m.ERROR,1),f(g.ERROR,o.slot,o.placementId)}i[o.arid].logTrace("adFeedBack",{adFeedBackResponse:t})}},function(){}))}}},{"../../components/ajaxRequest":6,"../../components/util":9,"../metrics/counters":17,"../metrics/csa":18,"../metrics/csm":19,"../metrics/events":20}],12:[function(e,t,a){var o=e("../../components/util"),i={};t.exports.subscribe=function(t,a,n){t&&t.id&&!i[t.id]&&o.isAUIAvailable()&&P.when("gw-video-orchestrator").execute(function(e){e.subscribe(t,a,n),i[t.id]=!0})},t.exports.elect=function(t){t&&o.isAUIAvailable()&&P.when("gw-video-orchestrator").execute(function(e){e.elect(t)})},t.exports.unelect=function(){o.isAUIAvailable()&&P.when("gw-video-orchestrator").execute(function(e){e.elect()})}},{"../../components/util":9}],13:[function(e,t,a){var i=e("./hpVideoOrchestrator"),r=e("./viewability"),s=null;t.exports.requestVideoAutoplay=function(t,e,a){var n,o=function(e){a.sendCustomMessageToAd(t.options.arid,"videoAutoplayResponse",e)};t.options.expParams&&t.options.expParams.noVideoAutoplay?o(!1):(n=t.options.pageType)&&"gateway"===n.toLowerCase()?i.subscribe(t.iframe,o,e):s===t.options.arid?o(!0):null===s&&function(e){for(var t=document.getElementsByTagName("video"),a=0;a<t.length;++a)if(!t[a].paused&&r.canBeInSameViewport(e,t[a]))return!1;return!0}(t.iframe)?(s=t.options.arid,o(!0)):o(!1)},t.exports.releaseVideoAutoplay=function(){i.unelect(),s=null},t.exports.haveVideoAutoplayPermission=function(e){i.elect(e.iframe),s=e.options.arid}},{"./hpVideoOrchestrator":12,"./viewability":14}],14:[function(e,d,t){function c(e,t,a){var n=0;return"visible"!==document.visibilityState?n:(n=0<e?a-e:0<t?Math.min(t,a):0,Math.min(n,t-e))}function r(){try{var e={};return e.t=window.screenY?window.screenY:window.screenTop,e.l=window.screenX?window.screenX:window.screenLeft,e.w=d.exports.windowWidth(),e.h=d.exports.windowHeight(),e.b=e.t+e.h,e.r=e.l+e.w,e}catch(e){return null}}function s(e,t){try{var a={},n=l(e,t),o=function(e){try{var t={},a=d.exports.windowWidth(),n=d.exports.windowHeight(),o=Math.max(0,c(e.t,e.b,n)),i=Math.max(0,c(e.l,e.r,a)),r=o*i,s=e.h*Math.min(e.w,a);return t.iv=0!==s||0!==r?(t.xiv=Number(Math.min(1,i/e.w).toFixed(2)),t.yiv=Number(Math.min(1,o/e.h).toFixed(2)),Number(Math.min(1,Math.max(0,r/s)).toFixed(2))):(t.xiv=0,t.yiv=0),t}catch(e){return null}}(n);return a.t=n.t,a.l=n.l,a.r=n.r,a.b=n.b,a.w=n.w,a.h=n.h,a.z=n.z,a.xiv=o.xiv,a.yiv=o.yiv,a.iv=o.iv,a}catch(e){return null}}function l(e,t){try{var a={},n=t||e.getBoundingClientRect();return a.t=n.top,a.l=n.left,a.r=n.right,a.b=n.bottom,a.w=n.width||a.r-a.l,a.h=n.height||a.b-a.t,a.z=e?Number(window.getComputedStyle(e,null).zIndex):NaN,a}catch(e){return null}}function u(e,t){try{var a={},n=t||e.getBoundingClientRect();return a.t=n.top,a.l=n.left,a.r=d.exports.windowWidth()-n.right,a.b=d.exports.windowHeight()-n.bottom,a.xs=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>d.exports.windowWidth()?1:0,a.yx=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>d.exports.windowHeight()?1:0,a}catch(e){return null}}d.exports.findVerticalPositionReached=function(){try{return window.scrollY+d.exports.windowHeight()}catch(e){return null}},d.exports.findDistanceFromViewport=function(e){try{return e.getBoundingClientRect().top-d.exports.windowHeight()}catch(e){return null}},d.exports.getViewableInfo=function(e){var t={};if(t.atf=function(e){if(!e)return"unknown";var t=function(e){try{var t=l(e,null),a=d.exports.windowHeight(),n=d.exports.windowWidth(),o=document.body.getBoundingClientRect(),i=Math.max(0,Math.min(o.left+n,t.r)-t.l),r=Math.max(0,Math.min(o.top+a,t.b)-t.t),s=i*r/(t.h*Math.min(t.w,n)),c=Number(Math.min(1,Math.max(0,s)).toFixed(2));return c}catch(e){return null}}(e);{if(null==t)return"unknown";if(.5<=t)return!0}return!1}(e),!e)return t;var a=r(),n=s(e),o=u(e);return a&&n&&o&&(t.geom={},t.geom.win=a,t.geom.self=n,t.geom.exp=o,t.payload={},t.payload.wh=a.h,t.payload.ww=a.w,t.payload.sx=window.scrollX,t.payload.sy=window.scrollY,t.payload.ah=n.h,t.payload.aw=n.w,t.payload.top=n.t,t.payload.left=n.l),t},d.exports.takeSnapshotOfSlotPosition=function(e){try{return{initialBoundingRect:e.getBoundingClientRect(),adHeight:e.offsetHeight,adWidth:e.offsetWidth,originalScrollX:window.scrollX,originalScrollY:window.scrollY}}catch(e){return null}},d.exports.getNoInventoryViewabilityData=function(e){var t={},a=function(e){try{var t=e.initialBoundingRect,a=t.top-(window.scrollY-e.originalScrollY),n=a+e.adHeight,o=t.left-(window.scrollX-e.originalScrollX),i=o+e.adWidth;return{top:a,bottom:n,left:o,right:i,width:e.adWidth,height:e.adHeight}}catch(e){return null}}(e),n=r(),o=s(null,a),i=u(null,a);return n&&o&&i?(t.geom={},t.geom.win=n,t.geom.self=o,t.geom.exp=i,t.payload={},t.payload.wh=n.h,t.payload.ww=n.w,t.payload.sx=window.scrollX,t.payload.sy=window.scrollY,t.payload.ah=o.h,t.payload.aw=o.w,t.payload.top=o.t,t.payload.left=o.l,t):null},d.exports.windowHeight=function(){return window.innerHeight||document.documentElement.clientHeight},d.exports.windowWidth=function(){return window.innerWidth||document.documentElement.clientWidth},d.exports.canBeInSameViewport=function(e,t){var a=l(e),n=l(t),o=d.exports.windowWidth(),i=d.exports.windowHeight();return a&&n&&(Math.abs(a.t-n.b)<i||Math.abs(a.b-n.t)<i)&&(Math.abs(a.l-n.r)<o||Math.abs(a.r-n.l)<o)}},{}],15:[function(e,t,a){var n=e("./messenger/msgHandler"),o=n.messenger,i=n.logError;t.exports.startPixelTracking=function(e,t){o.startPixelTracking(e.options.arid,function(){try{o.sendMessageToAd(e.options.arid,"fireImpression",t),t.isNoInventory?o.supportedCommands.enableNoInventoryViewabilityTrackerAndInvokeFallback(e):o.supportedCommands.enableViewabilityTracker(e)}catch(e){i("Error firing pixels. data: "+JSON.stringify(t))}})},t.exports.startPixelTrackingForLegacyImpression=function(e,t){o.startPixelTracking(e.options.arid,function(){try{o.sendMessageToAd(e.options.arid,"fireMetricsForLegacyImpression",{})}catch(e){i("Error firing legacy impression metrics")}})}},{"./messenger/msgHandler":16}],16:[function(e,t,a){var b=e("../components/viewability"),f=e("../../components/util"),n=e("../metrics/csm"),o=e("../metrics/csa"),i=e("../metrics/counters"),r=i.CUSTOM_MESSAGE_COUNTERS,m=i.PIXEL_CONDITIONS,s=n.sendCsmLatencyMetric,E=n.sendCsmCounter,c=o.markCsaLatencyMetric,d={ERROR:"ERROR",WARN:"WARN",FATAL:"FATAL"},l=u();function T(e,t){var a=t||new Error(e);E("",null,"safeFrameError",1),window.sfLogErrors&&(window.ueLogError?window.ueLogError(a,{logLevel:d.ERROR,attribution:"APE-safeframe",message:e+" "}):"undefined"!=typeof console&&console.error&&console.error(e,a))}function u(){var e=window.location.hostname.split(".").pop(),t="na";return/^(com|ca|mx|br)$/.test(e)?t="na":/^(uk|de|fr|it|es|in|ae|sa|nl|tr|se)$/.test(e)?t="eu":/^(jp|au)$/.test(e)?t="fe":/^(cn)$/.test(e)&&(t="cn"),"https://images-"+t+".ssl-images-amazon.com"}function g(e){return e.replace(/^.{1,5}:\/\/|^\/\//,"")}function h(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window}function A(e){return!e||x(e)||2<(t=e).length&&"px"===t.substring(t.length-2)?e:e+"px";var t}function x(e){return 1<e.length&&"%"===e.charAt(e.length-1)}function p(e,t,a,n){var o=!1,i=function(){n(a,e)&&(t(),o=!0)},r=f.safeFunctionWrapper(f.throttle(function(){i(),o&&(f.removeWindowListener("scroll",i),f.removeWindowListener("resize",i))},20));f.addWindowListener("scroll",r),f.addWindowListener("resize",r)}t.exports.util=f,t.exports.viewability=b,t.exports.messenger=new function(e,t,a){var u=this;this.adMap=e||{},this.supportedCommands=t||{},this.msgListeners=a||{};var p=function(e){var t=u.adMap,a=t[e].options;if(t==={}||a==={})return null;var n="ape_"+a.slot+"_iframe";return t[e].iframe&&(t[e].iframe=t[e].iframe&&t[e].iframe.innerHTML?t[e].iframe:document.getElementById(n)),t[e].iframe};this.sendMessageToAd=function(e,t,a){var n=p(e),o=n?n.contentWindow:null;if(o){var i={command:t,data:a};i=JSON.stringify(i),o.postMessage(i,"*")}},this.receiveMessage=function(t){var e=u.adMap,a=u.supportedCommands;if(e!=={}){var n,o,i,r,s;try{if(t.data&&t.data.message&&t.data.message.id&&-1<t.data.message.id.toLowerCase().indexOf("mash"))throw"Received Mash message";o=e[(n=JSON.parse(t.data)).arid]}catch(e){return}try{if(s=t,!(r=o)||!r.options||g(s.origin)!==g(l)||"object"!=typeof n.data||!a.hasOwnProperty(n.command))throw"Invalid Message: "+JSON.stringify(t.data);var c=a[n.command];c&&(o.options.debug&&"undefined"!=typeof console&&console.log(t),c(o,n.data))}catch(e){i="Problem with message: "+t.data,void 0!==n&&(i+=u.appendErrorDetails(n.arid)),T(i,e)}}},this.appendErrorDetails=function(e){var t=u.adMap;if(t==={})return"";var a="";if(void 0!==t[e]){var n=t[e].options;void 0!==n.aanResponse&&(a=" Ad Details: "+JSON.stringify(n.aanResponse))}return a},this.customMessage=function(e,t,a,n,o){var i=u.msgListeners;try{"undefined"!==a&&Array.isArray(a)&&(-1<a.indexOf(e)&&i[e]?(E(null,null,r.ALLOWLISTED+":"+e,1),i[e](t)):-1===a.indexOf(e)?(E(null,null,r.NOT_ALLOWLISTED,1),E(n,o,r.NOT_ALLOWLISTED,1)):T("Unrecognized custom message key: "+e))}catch(e){T("Custom Message Error",e)}},this.registerCustomMessageListener=function(e,t,a){var n=!1,o=u.msgListeners;try{!o[e]||"function"!=typeof o[e]||a?(o[e]=t,n=!0):T("Duplicate Key",new Error("Custom message listener already exists for key: "+e))}catch(e){T("Error registering custom message listener",e)}return n},this.sendCustomMessage=function(e,t){var a=u.adMap,n={key:e,data:t};for(var o in a)u.sendMessageToAd(o,"customMessage",n)},this.sendCustomMessageToAd=function(e,t,a){var n={key:t,data:a};u.sendMessageToAd(e,"customMessage",n)},this.takeSnapshotOfSlotPosition=function(e){var t=u.adMap,a=t&&t[e]&&t[e].options;if(t&&t!=={}&&a&&a!=={}){var n=p(e);u.adMap[e].options.slotSnapshot=b.takeSnapshotOfSlotPosition(n)}},this.startPixelTracking=function(e,t){var a,n,o,i="prerender"!==document.visibilityState,r=p(e),s=!!((a=r).offsetWidth||a.offsetHeight||a.getClientRects().length),c=u.adMap&&u.adMap[e]&&u.adMap[e].options;!i&&c&&E(c.slot,c.placementId,m.PAGE_PRERENDER,1),!s&&c&&E(c.slot,c.placementId,m.AD_MISSING,1);var d=function(){return!(!i||!s||(t(),o&&f.removeListener(document,"visibilitychange",o),n&&h()&&n.unobserve(r),0))};if(!d()){var l={root:document.documentElement};h()&&(n=new IntersectionObserver(function(e,t){try{1===e.length&&(e[0].isIntersecting?(s=!0,d()):s=!1)}catch(e){T("Error executing intersectionObserver callback")}},l)).observe(r),o=function(){try{"prerender"!==document.visibilityState?(i=!0,d()):i=!1}catch(e){T("Error executing pageVisibilityHandler callback")}},f.addListener(document,"visibilitychange",o)}},this.updateViewability=function(e){var t=u.adMap,a=t&&t[e]&&t[e].options;if(t&&t!=={}&&a&&a!=={}){var n=p(e),o=t[e].options.viewabilityStandards,i=b.getViewableInfo(n);null!==i&&(i.viewabilityStandards=o,u.sendMessageToAd(e,"updateViewability",i))}},this.updateNoInventoryViewability=function(e){var t=u.adMap,a=t&&t[e]&&t[e].options,n=a&&a.slotSnapshot;if(t&&t!=={}&&a&&a!=={}&&n){var o=a.viewabilityStandards,i=b.getNoInventoryViewabilityData(n);null!==i&&(i.viewabilityStandards=o,u.sendMessageToAd(e,"updateViewability",i))}}},t.exports.logError=T,t.exports.SF_DOMAIN=l,t.exports.loadScript=function(e,t){var a=document.createElement("script");a.src=e,a.setAttribute("crossorigin","anonymous"),a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onload=a.onreadystatechange=null,t&&"function"==typeof t&&t())},a.onerror=function(e){return T("Error loading script",e),!1},(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)},t.exports.fireViewableLatencyMetrics=function(e,t,a,n){window.apeViewableLatencyTrackers&&window.apeViewableLatencyTrackers[e]&&window.apeViewableLatencyTrackers[e].valid&&(window.apeViewableLatencyTrackers[e].loaded=!0,window.apeViewableLatencyTrackers[e].viewed&&(s("ld",t,a,"viewablelatency",n),c("viewablelatency:loaded",n),E(t,a,"htmlviewed:loaded",1)))},t.exports.hasClass=function(e,t){var a=new RegExp("(^|\\s)"+t+"(\\s|$)"),n=e.className;return n&&a.test(n)},t.exports.createIframeWithAttributes=function(e,t,a){var n=document.createElement("iframe");return n.name=JSON.stringify(e),n.id=t,n.src=a,n.height=A(e.size.height)||"250px",n.width=A(e.size.width)||"300px",n.className=e.iframeClass||"",n.setAttribute("frameborder","0"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("scrolling","no"),n.setAttribute("allowtransparency","true"),n.setAttribute("data-arid",e.arid),n.style.cssText=e.iframeExtraStyle||"",n.sandbox="allow-scripts allow-popups allow-popups-to-escape-sandbox allow-same-origin",/(Chrome|Safari|AppleWebKit|Amazon)/.test(navigator.userAgent)?n.sandbox+=" allow-top-navigation-by-user-activation":n.sandbox+=" allow-top-navigation",n},t.exports.logCounter=function(e,t){window.ue&&"function"==typeof window.ue.count&&window.ue.count(e,t)},t.exports.collapseSlot=function(e){var t=document.getElementById(e);void 0!==t&&t&&(t.style.display="none")},t.exports.setResizePlacementStyle=function(e,t,a){var n=document.getElementById(t[e].placementDivId),o=document.getElementById(t[e].wrapperDivId)||n,i=document.getElementById(t[e].iframeId),r=a.resizePlacementWidthThreshold,s=a.resizePlacementStyleAboveThreshold,c=a.resizePlacementStyleBelowThreshold;r=parseInt(r,10),o&&i&&r&&s&&c&&(o.offsetWidth<r?f.setObjectStyles(i,c):f.setObjectStyles(i,s))},t.exports.resizeSafeFrameAd=function(t,e,a,n,o,i){try{var r=document.getElementById(i[t].placementDivId),s=document.getElementById(i[t].wrapperDivId)||r,c=document.getElementById(i[t].iframeId);if(null===s||null===r||null===c)return;var d=x(a),l=x(e),u=!l&&!d,p=parseInt(e,10),f=l?c.offsetWidth:p,m=d?c.offsetHeight:parseInt(a,10),g=parseInt(n,10),h=function(e){u&&(m=Math.round(e*m/f)),f=Math.round(e)},w=0===s.offsetWidth?b.windowWidth():s.offsetWidth;g&&b.windowHeight()<b.windowWidth()?h(g):h(w),o&&o.adMap&&o.adMap[t]&&o.adMap[t].options&&o.adMap[t].options.slotSnapshot&&(o.adMap[t].options.slotSnapshot.adHeight=m,o.adMap[t].options.slotSnapshot.adWidth=f);var v=A(f),y=A(u?m:a);c.style.height=y;var S={width:c.style.width=v,height:y};s!==r&&(r.style.height=y,o.sendMessageToAd(t,"resizeCreativeWrapper",S)),"Detail_hero-quick-promo_Desktop"===i[t].slotId&&(E(i[t].slotId,o.adMap[t].options.placementId,"OffsetLeft",c.offsetLeft),E(i[t].slotId,o.adMap[t].options.placementId,"OffsetTop",c.offsetTop),E(i[t].slotId,o.adMap[t].options.placementId,"OffsetWidth",c.offsetWidth),E(i[t].slotId,o.adMap[t].options.placementId,"OffsetHeight",c.offsetHeight))}catch(e){T("Error resizing ad: "+i[t].slotId,e)}},t.exports.delayLoad=function(e,t,a,n){var o="undefined"!=typeof P,i="undefined"!=typeof amznJQ,r="number"==typeof a&&0!==a?function(){setTimeout(t,a)}:t;if("windowOnLoad"===e)"complete"===document.readyState?r():f.addWindowListener("load",r);else if("spATFEvent"===e)o?P.when("search-page-utilities").execute(function(e){e.afterEvent("spATFEvent",r)}):i?amznJQ.available("search-js-general",function(){window.SPUtils.afterEvent("spATFEvent",r)}):r();else if("aboveTheFold"===e)o?P.when("af").execute(r):i?amznJQ.onCompletion("amznJQ.AboveTheFold",r):r();else if("criticalFeature"===e)o?P.when("cf").execute(r):i?amznJQ.onCompletion("amznJQ.criticalFeature",r):r();else if("r2OnLoad"===e)o?P.when("r2Loaded").execute(r):i?amznJQ.onReady("r2Loaded",r):r();else if(e.match("[^:]+:.+")){var s=e.split(":"),c=s[0].split("."),d=s[1],l=2<s.length?s[2]:d;o?P.when(l,"A").execute(r):i&&1<c.length?amznJQ[c[1]](d,r):r()}else if(e.match(/^\d{1,4}px$/g))p(parseInt(e,10),r,n,function(e,t){return e&&b.findDistanceFromViewport(e)<=t});else{var u=/^reached(\d{1,5}px)FromTop$/g.exec(e);u?p(parseInt(u[1],10),r,n,function(e,t){return b.findVerticalPositionReached()>=t}):r()}},t.exports.getMediaCentralOrigin=u,t.exports.sizeValidator=function(e,t){return e.height===t.height&&e.width===t.width},t.exports.checkAgainstAllowlist=function(e,t,a){if(!t||"object"!=typeof t)return!1;for(var n=0,o=t.length;n<o;n++)if(a(e,t[n]))return!0;return!1},t.exports.isInterSectionObserverSupported=h},{"../../components/util":9,"../components/viewability":14,"../metrics/counters":17,"../metrics/csa":18,"../metrics/csm":19}],17:[function(e,t,a){t.exports.AD_LOAD_COUNTERS={START:"adload:start",CALLBACK:"adload:delayloadcallback",IFRAME_CREATED:"adload:iframecreated"},t.exports.CACHE_COUNTERS={SF_LIBRARY:"cache:sflibrary:",SF_HTML:"cache:sfhtml:"},t.exports.FEEDBACK_COUNTERS={REQUEST:"adfeedback:request",SUCCESS:"adfeedback:success",ERROR:"adfeedback:error",LABEL_RENDER:"adfeedback:sponsoredlabelrender"},t.exports.MESSENGER_COUNTERS={API:"messenger:"},t.exports.ABP_STATUS_COUNTERS={1:"abpstatus:enabled",0:"abpstatus:notenabled","-1":"abpstatus:unknown"},t.exports.SF_VERSION_COUNTERS={VERSION:"sfversion"},t.exports.RESOURCE_TIMING_DATA_COUNTERS={NEXUS_CLIENT_NOT_DEFINED:"ResourceTimingData.NexusClientNotDefined",LOGGING_FAILED:"ResourceTimingData.LoggingFailed",LOGGING_SUCCESSFUL:"ResourceTimingData.LoggingSuccessful",DEPENDENCIES_NOT_MET:"ResourceTimingData.DependenciesNotMet"},t.exports.CUSTOM_MESSAGE_COUNTERS={ALLOWLISTED:"custommessage:allowlisted",NOT_ALLOWLISTED:"custommessage:notallowlisted"},t.exports.PIXEL_CONDITIONS={PAGE_PRERENDER:"pixelcondition:pageprerender",AD_MISSING:"pixelcondition:admissing"}},{}],18:[function(e,t,a){var n=e("../messenger/msgHandler"),o={};t.exports.initCsaLatencyPlugin=function(e){window.csa&&(o.latencyPlugin=window.csa("Content",{element:e}))},t.exports.markCsaLatencyMetric=function(e,t){try{o.latencyPlugin("mark",e,t)}catch(e){n.logError("Error with initiating CSA",e)}},t.exports.initCsaEvents=function(){window.csa&&(o.events=window.csa("Events",{producerId:"adplacements"}))},t.exports.logCsaEvent=function(e,t,a){try{o.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t+":"+a,metricValue:1},{ent:"all"})}catch(e){n.logError("Error with initiating CSA",e)}},t.exports.addCsaEntity=function(e){try{o.events("setEntity",{adCreativeMetaData:e})}catch(e){n.logError("Error with initiating CSA",e)}},t.exports.csa=o},{"../messenger/msgHandler":16}],19:[function(e,t,a){var s={bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"};function c(e,t,a,n){var o=[e,t,a];return n&&o.push(n),o}t.exports.sendCsmLatencyMetric=function(e,t,a,n,o){if(s.hasOwnProperty(e)){var i=s[e],r=n?n+":":"";"function"==typeof window[i]&&(window[i].apply(this,c(e,"adplacements:"+r+t.replace(/_/g,":"),{wb:1},o)),a&&window[i].apply(this,c(e,"adplacements:"+r+a,{wb:1},o)))}},t.exports.sendCsmCounter=function(e,t,a,n){if(window.ue&&"function"==typeof window.ue.count){var o="adplacements:"+a;if(e&&(o+=":"+e.replace(/_/g,":")),window.ue.count(o,n),t){var i="adplacements:"+(a&&t?a+":":a)+t;window.ue.count(i,n)}}},t.exports.addCsmTag=function(e,t,a,n){if(window.ue&&window.ue.tag){if(t){var o=e+":"+t.replace(/_/g,":")+(n?":"+n:"");window.ue.tag(o)}if(a){var i=e+":"+a+(n?":"+n:"");window.ue.tag(i)}t||a||window.ue.tag(e+(n?":"+n:""))}}},{}],20:[function(e,t,a){t.exports.AD_LOAD_EVENTS={START:"adload_start",CALLBACK:"adload_delayload",IFRAME_CREATED:"adload_iframecreated"},t.exports.CACHE_EVENTS={SF_LIBRARY:"sflibrary_",SF_HTML:"sfhtml_"},t.exports.FEEDBACK_EVENTS={REQUEST:"adfeedback_request",SUCCESS:"adfeedback_success",ERROR:"adfeedback_error",LABEL_RENDER:"adfeedback_sponsoredlabelrender"},t.exports.ABP_STATUS_EVENTS={1:"abpstatus_enabled",0:"abpstatus_notenabled","-1":"abpstatus_unknown"},t.exports.SF_VERSION_EVENTS={VERSION:"sfversion_"},t.exports.RESOURCE_TIMING_DATA_EVENTS={LOGGING_FAILED:"resourceTimingData_LoggingFailed",LOGGING_SUCCESSFUL:"resourceTimingData_LoggingSuccessful",DEPENDENCIES_NOT_MET:"resourceTimingData_DependenciesNotMet",DEPENDENCIES_MET:"resourceTimingData_DependenciesMet"}},{}]},{},[10]);